{"ast":null,"code":"const getOrCreateLegendList = (chart, id) => {\n  const legendContainer = document.getElementById(id);\n  let listContainer = legendContainer.querySelector(\"ul\");\n\n  if (!listContainer) {\n    listContainer = document.createElement(\"ul\");\n    listContainer.style.display = \"flex\";\n    listContainer.style.flexDirection = \"column\";\n    listContainer.style.margin = 0;\n    listContainer.style.padding = 0;\n    legendContainer.appendChild(listContainer);\n  }\n\n  return listContainer;\n};\n\nexport const htmlLegendPlugin = {\n  id: \"htmlLegend\",\n\n  afterUpdate(chart, args, options) {\n    const ul = getOrCreateLegendList(chart, options.containerID); // Remove old legend items\n\n    while (ul.firstChild) {\n      ul.firstChild.remove();\n    } // Reuse the built-in legendItems generator\n\n\n    const items = chart.options.plugins.legend.labels.generateLabels(chart);\n    items.forEach(item => {\n      const li = document.createElement(\"li\");\n      li.style.alignItems = \"center\";\n      li.style.cursor = \"pointer\";\n      li.style.display = \"flex\";\n      li.style.flexDirection = \"row\";\n      li.style.marginLeft = \"10px\";\n      li.style.marginBottom = \"5px\";\n      let legendItems = chart.legend.legendItems;\n      let count = 0;\n      let iValue = -1;\n\n      for (let i = 0; i < legendItems.length; i++) {\n        if (!legendItems[i].hidden) {\n          count = count + 1;\n          iValue = i;\n        }\n      }\n\n      let firstTime = count === legendItems.length ? true : false;\n\n      li.onclick = (p, p2, p3) => {\n        const {\n          type\n        } = chart.config;\n\n        if (type === \"pie\" || type === \"doughnut\") {\n          for (let i = 0; i < legendItems.length; i++) {\n            if (firstTime) {\n              if (i !== item.index) {\n                chart.toggleDataVisibility(i);\n              }\n            }\n          }\n\n          if (!firstTime) {\n            chart.toggleDataVisibility(item.index);\n          }\n\n          if (count === 1 && iValue === item.index) {\n            for (let i = 0; i < legendItems.length; i++) {\n              chart.toggleDataVisibility(i);\n            }\n          }\n        }\n\n        chart.update();\n      }; // Color box\n\n\n      const boxSpan = document.createElement(\"span\");\n      boxSpan.style.background = item.fillStyle;\n      boxSpan.style.borderColor = item.strokeStyle;\n      boxSpan.style.borderWidth = item.lineWidth + \"px\";\n      boxSpan.style.display = \"inline-block\";\n      boxSpan.style.height = \"20px\";\n      boxSpan.style.marginRight = \"10px\";\n      boxSpan.style.width = \"20px\"; // Text\n\n      const textContainer = document.createElement(\"p\");\n      textContainer.style.color = item.fontColor;\n      textContainer.style.margin = 0;\n      textContainer.style.padding = 0;\n      textContainer.style.textDecoration = firstTime ? item.hidden ? \"line-through\" : \"\" : item.hidden ? \"\" : \"line-through\";\n      const text = document.createTextNode(item.text);\n      textContainer.appendChild(text);\n      li.appendChild(boxSpan);\n      li.appendChild(textContainer);\n      ul.appendChild(li);\n    });\n  }\n\n};\nexport const calculateTotal = data => {\n  return data.datasets[0].data.reduce((a, b) => a + b, 0);\n};\n\nconst dynamicColors = function () {\n  const r = Math.floor(Math.random() * 255);\n  const g = Math.floor(Math.random() * 255);\n  const b = Math.floor(Math.random() * 255);\n  return \"rgb(\" + r + \",\" + g + \",\" + b + \")\";\n};\n\nexport const addDynamicColor = data => {\n  data.labels.forEach(() => data.datasets[0].backgroundColor.push(dynamicColors()));\n};","map":{"version":3,"sources":["D:/dougnut-chart-library/src/helper.js"],"names":["getOrCreateLegendList","chart","id","legendContainer","document","getElementById","listContainer","querySelector","createElement","style","display","flexDirection","margin","padding","appendChild","htmlLegendPlugin","afterUpdate","args","options","ul","containerID","firstChild","remove","items","plugins","legend","labels","generateLabels","forEach","item","li","alignItems","cursor","marginLeft","marginBottom","legendItems","count","iValue","i","length","hidden","firstTime","onclick","p","p2","p3","type","config","index","toggleDataVisibility","update","boxSpan","background","fillStyle","borderColor","strokeStyle","borderWidth","lineWidth","height","marginRight","width","textContainer","color","fontColor","textDecoration","text","createTextNode","calculateTotal","data","datasets","reduce","a","b","dynamicColors","r","Math","floor","random","g","addDynamicColor","backgroundColor","push"],"mappings":"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","sourcesContent":["const getOrCreateLegendList = (chart, id) => {\r\n    const legendContainer = document.getElementById(id);\r\n    let listContainer = legendContainer.querySelector(\"ul\");\r\n    if (!listContainer) {\r\n      listContainer = document.createElement(\"ul\");\r\n      listContainer.style.display = \"flex\";\r\n      listContainer.style.flexDirection = \"column\";\r\n      listContainer.style.margin = 0;\r\n      listContainer.style.padding = 0;\r\n      legendContainer.appendChild(listContainer);\r\n    }\r\n    return listContainer;\r\n  };\r\nexport const htmlLegendPlugin = {\r\n    id: \"htmlLegend\",\r\n    afterUpdate(chart, args, options) {\r\n      const ul = getOrCreateLegendList(chart, options.containerID);\r\n      // Remove old legend items\r\n      while (ul.firstChild) {\r\n        ul.firstChild.remove();\r\n      }\r\n      // Reuse the built-in legendItems generator\r\n      const items = chart.options.plugins.legend.labels.generateLabels(chart);\r\n      items.forEach((item) => {\r\n        const li = document.createElement(\"li\");\r\n        li.style.alignItems = \"center\";\r\n        li.style.cursor = \"pointer\";\r\n        li.style.display = \"flex\";\r\n        li.style.flexDirection = \"row\";\r\n        li.style.marginLeft = \"10px\";\r\n        li.style.marginBottom = \"5px\";\r\n        let legendItems = chart.legend.legendItems;\r\n        let count = 0;\r\n        let iValue = -1;\r\n        for (let i = 0; i < legendItems.length; i++) {\r\n          if (!legendItems[i].hidden) {\r\n            count = count + 1;\r\n            iValue = i;\r\n          }\r\n        }\r\n        let firstTime = count === legendItems.length ? true : false;\r\n        li.onclick = (p, p2, p3) => {\r\n  \r\n          const { type } = chart.config;\r\n          if (type === \"pie\" || type === \"doughnut\") {\r\n  \r\n            for (let i = 0; i < legendItems.length; i++) {\r\n              if (firstTime) {\r\n                if (i !== item.index) {\r\n                  chart.toggleDataVisibility(i);\r\n                }\r\n              }\r\n            }\r\n            if (!firstTime) {\r\n              chart.toggleDataVisibility(item.index);\r\n            }\r\n            if (count === 1 && iValue === item.index) {\r\n              for (let i = 0; i < legendItems.length; i++) {\r\n                chart.toggleDataVisibility(i);\r\n              }\r\n            }\r\n  \r\n          }\r\n          chart.update();\r\n        };\r\n        // Color box\r\n        const boxSpan = document.createElement(\"span\");\r\n        boxSpan.style.background = item.fillStyle;\r\n        boxSpan.style.borderColor = item.strokeStyle;\r\n        boxSpan.style.borderWidth = item.lineWidth + \"px\";\r\n        boxSpan.style.display = \"inline-block\";\r\n        boxSpan.style.height = \"20px\";\r\n        boxSpan.style.marginRight = \"10px\";\r\n        boxSpan.style.width = \"20px\";\r\n        // Text\r\n        const textContainer = document.createElement(\"p\");\r\n        textContainer.style.color = item.fontColor;\r\n        textContainer.style.margin = 0;\r\n        textContainer.style.padding = 0;\r\n        textContainer.style.textDecoration = firstTime ? item.hidden ? \"line-through\" : \"\" : item.hidden ? \"\" : \"line-through\";\r\n        const text = document.createTextNode(item.text);\r\n        textContainer.appendChild(text);\r\n        li.appendChild(boxSpan);\r\n        li.appendChild(textContainer);\r\n        ul.appendChild(li);\r\n      });\r\n    },\r\n  };\r\n  \r\nexport const calculateTotal = (data) => {\r\n    return data.datasets[0].data.reduce((a, b) => a + b, 0);\r\n}\r\nconst dynamicColors = function () {\r\n    const r = Math.floor(Math.random() * 255);\r\n    const g = Math.floor(Math.random() * 255);\r\n    const b = Math.floor(Math.random() * 255);\r\n    return \"rgb(\" + r + \",\" + g + \",\" + b + \")\";\r\n  };\r\n  \r\nexport const addDynamicColor = (data) => {\r\n    data.labels.forEach(() =>\r\n    data.datasets[0].backgroundColor.push(dynamicColors())\r\n  );\r\n}\r\n"]},"metadata":{},"sourceType":"module"}